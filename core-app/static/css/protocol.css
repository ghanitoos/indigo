/* Styles for printable inventory protocol */
/* Screen presentation tweaks */
.protocol-document { max-width: 190mm; margin: 0 auto; background: #fff; padding: 18mm; border: none; }
.protocol-header { display:flex; align-items:flex-start; justify-content:space-between; }
.header-left { flex:1; }
.header-center { flex:1; display:flex; align-items:center; justify-content:center; }
.header-right { width:140px; display:flex; flex-direction:column; align-items:flex-end; }
.logo { max-height:60px; display:block; }
.logo-placeholder { width:120px; height:80px; border:1px solid #e1e1e1; display:flex; align-items:center; justify-content:center; }
.protocol-title-centered { text-align:center; font-weight:700; font-size:11pt; margin-top:8px; }
.protocol-title-row { margin-top:6px; }
.logo-date { margin-top:4.5em; font-size:11pt; }
.proto-topline { display:flex; justify-content:flex-start; margin-top:4mm; }
.proto-left .proto-label { font-size:11pt; font-weight:600; }
.proto-left .proto-value { font-size:11pt; }
.device-block { margin-top:12mm; }
.device-line { font-size:11pt; margin-bottom:6px; }
.party-row { display:flex; justify-content:space-between; margin-top:18mm; }
.party-col { width:48%; }
.party-title { font-weight:700; font-size:11pt; margin-bottom:6px; }
.party-name { font-size:11pt; margin-bottom:10px; }
.signature-line { border-top:1px solid #000; width:80%; margin-top:10px; }
.signature-label { font-size:10pt; margin-top:6px; }
.protocol-title { text-align:center; margin-top:8px; margin-bottom:18px; font-weight:700; }
.protocol-meta { margin-bottom:12px; }
.protocol-table { width:100%; }
.signature-block { margin-top:36px; }
.signature-line { border-top:1px solid #000; width:80%; margin-top:24px; }
.signature-label { font-size:0.95rem; margin-top:6px; }

/* Hide site chrome when printing */
@media print {
  /* Use zero page-margin and control margins via the document padding so
     browsers don't add their own header/footer area which shifts the layout. */
  @page { size: A4; margin: 0mm; }
  body { background: #fff !important; color: #000 !important; font-family: 'Times New Roman', Times, serif; font-size: 12pt; }
  header, nav, .flash-messages, .btn, .btn-link, .dropdown, footer { display:none !important; }
  /* Reserve a printable page padding (acts like the former @page margin). */
  .protocol-document { max-width: 190mm; margin: 0; padding: 20mm; border: none; box-sizing: border-box; }
  .container, .card { box-shadow: none !important; border: none !important; }
  .protocol-header { padding: 0 0 12px 0; }
  .protocol-title { font-size: 20pt; margin-bottom: 6mm; font-family: 'Times New Roman', Times, serif; }
  .protocol-meta, .protocol-table { font-size: 12pt; }
  .signature-block { page-break-inside: avoid; }
  .no-print { display:none !important; }
}

/* Fixed header/footer for print: center at A4 width and repeat on every printed page.
   Use measured image aspect (≈990×141px => ~30mm height) so uploaded headers/footers
   are not excessively cropped or oversized. Reserve slightly larger margins to avoid
   overlap with main content. */
@media print {
  /* Allow header/footer to extend beyond the page margin so they visually
     reach the paper edges on both left and right (full-bleed). We assume the
     @page margin is 20mm; compute a bleed width = 210mm + 2*20mm. This makes
     both left and right sides preserved when cropping occurs. */
  .print-header-fixed,
  .print-footer-fixed {
    position: fixed;
    left: 50%;
    transform: translateX(-50%);
    /* Anchor to the physical A4 page width to avoid being pushed outside
       the printable paper area by browser chrome. Use exact A4 width so the
       element stays within the print viewport. */
    width: 210mm; /* A4 width */
    overflow: hidden;
    text-align: center;
    z-index: 1000; /* ensure header/footer render above content */
    pointer-events: none; /* allow clicks/select to pass through */
  }

  /* If a template should be rendered in the foreground, raise it above content */
  .print-header-foreground,
  .print-footer-foreground {
    z-index: 10000 !important;
    pointer-events: auto !important;
  }

    /* Position the header/footer relative to the printable page content
      by offsetting from the page padding. This keeps them inside the paper
      area in print preview and in print output. The document padding is
      20mm, so place footer 20mm above the viewport bottom (paper edge). */
      .print-header-fixed { top: 0mm; }
      /* Anchor footer to the physical bottom edge of the printed page so it
        appears inside the A4 area. The document's bottom margin (set inline
        in the template) already reserves space to avoid overlap with content. */
      .print-footer-fixed { bottom: 0mm !important; z-index: 11000 !important; }

  /* Use image height close to measured originals (~30mm). Use center positioning
     so both sides of the image are preserved when cover crops. */
  .print-header-fixed img,
  .print-footer-fixed img {
    display: block;
    /* Fill the A4 width area while maintaining aspect ratio. */
    width: 100%;
    height: auto; /* don't forcibly stretch the image */
    max-height: 30mm; /* respect the configured template height */
    object-fit: contain;
    object-position: center center;
  }

    /* Reserve space for header/footer so main content doesn't overlap. The
       document padding above already acts as page margin; keep additional
       reserved margin if templates require more space. */
    .protocol-document { /* margin-top: 35mm; margin-bottom: 35mm; */ position: relative; z-index: 1; }
}

/* Improve on-screen printing preview */
@media screen {
  .protocol-document { box-shadow: 0 2px 6px rgba(0,0,0,0.08); }
}
